# =============================================================================
# AIRTABLE MCP SERVER - CONFIGURACIÓN COMPLETA
# =============================================================================
# Este archivo contiene todas las variables de entorno necesarias para
# ejecutar el servidor Airtable MCP con funcionalidad completa
#
# IMPORTANTE: Copia este archivo como .env y configura los valores apropiados
# =============================================================================

# =============================================================================
# AIRTABLE OAUTH CONFIGURATION (RECOMENDADO PARA PRODUCCIÓN)
# =============================================================================
# Obtén estas credenciales de Airtable OAuth Apps:
# https://airtable.com/create/oauth

# Cliente OAuth de Airtable (Requerido para OAuth)
AIRTABLE_CLIENT_ID=tu_client_id_de_airtable

# Secreto OAuth de Airtable (Requerido para OAuth)
AIRTABLE_CLIENT_SECRET=tu_client_secret_de_airtable

# URL de redirección OAuth (debe coincidir EXACTAMENTE con Airtable)
AIRTABLE_REDIRECT_URI=https://tu-dominio.com/oauth/callback

# ✅ SCOPES COMPLETOS PARA TODAS LAS FUNCIONALIDADES
# Incluye TODOS los scopes para funcionalidad completa de Airtable MCP
AIRTABLE_SCOPES=data.records:read data.records:write data.recordComments:read data.recordComments:write schema.bases:read schema.bases:write webhook:manage block:manage user.email:read

# =============================================================================
# AIRTABLE PERSONAL ACCESS TOKEN (ALTERNATIVA PARA DESARROLLO)
# =============================================================================
# Token de Acceso Personal para desarrollo/testing
# Obtén de: https://airtable.com/account
AIRTABLE_PERSONAL_ACCESS_TOKEN=tu_personal_access_token_aqui

# Base ID por defecto (opcional - se puede configurar después)
AIRTABLE_BASE_ID=tu_base_id_opcional

# =============================================================================
# CONFIGURACIÓN DEL SERVIDOR MCP
# =============================================================================
# Puerto del servidor MCP
PORT=8000

# Host del servidor MCP
HOST=0.0.0.0

# Tipo de transporte MCP (stdio, http, sse, auto)
MCP_TRANSPORT=http

# Nivel de logging
LOG_LEVEL=INFO

# =============================================================================
# CONFIGURACIÓN DE BASE DE DATOS Y STORAGE
# =============================================================================
# Para producción: Redis (recomendado)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Para desarrollo: Storage en memoria (por defecto)
# DATABASE_URL=mongodb://localhost:27017/airtable-mcp
DATABASE_URL=

# =============================================================================
# CONFIGURACIÓN DE SEGURIDAD
# =============================================================================
# Clave secreta para JWT (genera una clave segura en producción)
SECRET_KEY=tu_clave_secreta_muy_segura_aqui

# Lista de bases permitidas (separadas por comas)
# ALLOWED_BASES=app1234567890,app0987654321

# Lista de tablas permitidas (formato: baseId:tableName, separadas por comas)
# ALLOWED_TABLES=app1234567890:Users,app1234567890:Products

# =============================================================================
# CONFIGURACIÓN AVANZADA
# =============================================================================
# Entorno de ejecución
ENVIRONMENT=development

# Configuración de gobernanza (opcional)
# AIRTABLE_GOVERNANCE_PATH=config/governance.json

# =============================================================================
# CONFIGURACIÓN DE BACK4APP (PARA OAUTH STORAGE)
# =============================================================================
# Solo necesario si usas Back4App para almacenamiento OAuth
# PARSE_APP_ID=tu_app_id
# PARSE_JAVASCRIPT_KEY=tu_javascript_key  
# PARSE_REST_API_KEY=tu_rest_api_key
# PARSE_SERVER_URL=https://parseapi.back4app.com

# =============================================================================
# CONFIGURACIÓN DE WEBHOOKS
# =============================================================================
# URL base para webhooks (opcional)
# WEBHOOK_BASE_URL=https://tu-dominio.com

# =============================================================================
# CONFIGURACIÓN DE TOON (RESPONSE FORMATTING)
# =============================================================================
# Habilitar formateo TOON
TOON_ENABLED=true

# Formato TOON (compact, verbose, json)
TOON_FORMAT=compact

# =============================================================================
# CONFIGURACIÓN DE DESARROLLO
# =============================================================================
# Modo debug (development solo)
DEBUG=false

# =============================================================================
# INSTRUCCIONES DE CONFIGURACIÓN
# =============================================================================
# 
# 1. PARA OAUTH (Recomendado para producción):
#    - Crea una aplicación OAuth en https://airtable.com/create/oauth
#    - Configura AIRTABLE_CLIENT_ID, AIRTABLE_CLIENT_SECRET
#    - Configura AIRTABLE_REDIRECT_URI que coincida exactamente con Airtable
#    - Usa los scopes completos en AIRTABLE_SCOPES
#
# 2. PARA DESARROLLO/TESTING:
#    - Usa AIRTABLE_PERSONAL_ACCESS_TOKEN
#    - Configura AIRTABLE_BASE_ID si sabes la base
#
# 3. SCOPES DISPONIBLES:
#    - data.records:read (leer registros)
#    - data.records:write (crear/editar/eliminar registros)
#    - data.recordComments:read (leer comentarios de registros)
#    - data.recordComments:write (crear/editar/eliminar comentarios)
#    - schema.bases:read (leer estructura de bases)
#    - schema.bases:write (modificar estructura de bases)
#    - webhook:manage (gestionar webhooks)
#    - block:manage (gestionar extensiones Blocks)
#    - user.email:read (leer información del usuario)
#
# 4. COMANDO PARA INICIAR:
#    python src/python/inspector_server.py
#    o
#    python main.py
#
# =============================================================================
